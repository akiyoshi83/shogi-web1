# 将棋Webアプリケーション

TypeScript + React で作成されたブラウザで遊べる将棋ゲームです。

## 特徴

- ✅ **テストファースト開発**: 全62個のテストで品質を保証
- 🎮 **完全な将棋ルール**: 基本的な駒の動き、成り、持ち駒、詰み判定を実装
- 🎨 **シンプルなUI**: 直感的に操作できるインターフェース
- 🚀 **モダンな技術スタック**: Vite + React + TypeScript

## 実装機能

### 駒の移動
- 歩、香、桂、銀、金、角、飛、玉の正しい動きのルール
- 成り駒（と金、成香、成桂、成銀、龍馬、龍王）の動き
- 各駒の移動可能な位置をハイライト表示

### 成り駒システム
- 敵陣（先手: 1-3段目、後手: 7-9段目）での成り判定
- 成るかどうかの確認ダイアログ
- 成り駒の金と同じ動き（角・飛は特別な動き）

### 持ち駒機能
- 取った駒を持ち駒として表示
- 持ち駒を任意の場所に打ち込み可能
- 二歩（同じ列に歩を2枚打てない）の制限
- 行き場のない駒（歩・香・桂）の打ち込み制限

### ゲーム管理
- 先手・後手のターン制
- 王が取られた時点で詰み判定
- 勝敗の表示
- ゲームリセット機能

## 技術スタック

- **フレームワーク**: React 18.3
- **言語**: TypeScript 5.6
- **ビルドツール**: Vite 5.4
- **テスト**: Vitest 1.0 + Testing Library
- **スタイリング**: 素のCSS
- **パッケージマネージャー**: npm

## セットアップ

### 必要な環境

- Node.js 18.x 以上
- npm 9.x 以上

### インストール

```bash
# 依存パッケージのインストール
npm install
```

### 開発サーバーの起動

```bash
npm run dev
```

ブラウザで http://localhost:5173/ にアクセスしてください。

### テストの実行

```bash
# 全テストを実行
npm test

# カバレッジ付きでテスト実行
npm run test:coverage

# UIモードでテスト実行
npm run test:ui
```

### ビルド

```bash
# 本番用ビルド
npm run build

# ビルド結果のプレビュー
npm run preview
```

## プロジェクト構造

```
src/
├── components/              # Reactコンポーネント
│   ├── Board.tsx           # 将棋盤コンポーネント
│   ├── Board.css
│   ├── Board.test.tsx
│   ├── CapturedPieces.tsx  # 持ち駒表示コンポーネント
│   └── CapturedPieces.css
├── hooks/                   # カスタムフック
│   ├── useGameState.ts     # ゲーム状態管理
│   └── useGameState.test.ts
├── types/                   # TypeScript型定義
│   ├── shogi.ts
│   └── shogi.test.ts
├── utils/                   # ユーティリティ関数
│   ├── initialBoard.ts     # 初期配置
│   ├── moveRules.ts        # 駒の移動ルール
│   ├── promotion.ts        # 成りルール
│   ├── dropRules.ts        # 持ち駒の打ち込みルール
│   ├── checkmate.ts        # 詰み判定
│   └── *.test.ts           # 各種テスト
├── App.tsx                  # ルートコンポーネント
├── main.tsx                 # エントリーポイント
└── test/
    └── setup.ts            # テストセットアップ
```

## 遊び方

1. **駒の選択**: 自分の駒をクリックして選択
2. **移動**: 緑色にハイライトされたマスをクリックして移動
3. **成り**: 敵陣に入ると成るかどうか確認ダイアログが表示
4. **持ち駒を打つ**: 持ち駒エリアの駒をクリックして、盤面の空いているマスに配置
5. **勝利**: 相手の王を取ると勝利

## テスト

このプロジェクトはテストファースト開発（TDD）で作成されています。

- **テストファイル数**: 8ファイル
- **総テスト数**: 62テスト
- **カバレッジ**: 主要なロジックを網羅

```bash
# テスト実行結果の例
Test Files  8 passed (8)
Tests  62 passed (62)
```

## ライセンス

MIT

## 開発

このプロジェクトは Claude Code を使用して開発されました。

🤖 Generated with [Claude Code](https://claude.com/claude-code)
